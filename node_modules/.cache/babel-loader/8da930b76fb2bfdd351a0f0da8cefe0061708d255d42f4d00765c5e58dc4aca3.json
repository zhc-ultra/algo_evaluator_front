{"ast":null,"code":"import { ref } from \"vue\";\nconst useControlBlock = ({\n  value,\n  onChange\n}) => {\n  const active = ref(false);\n  const blockRef = ref();\n  const handlerRef = ref();\n  const getPercentNumber = (value2, max) => {\n    if (value2 < 0) return 0;\n    if (value2 > max) return 1;\n    return value2 / max;\n  };\n  const setCurrentPosition = ev => {\n    if (!blockRef.value) return;\n    const {\n      clientX,\n      clientY\n    } = ev;\n    const rect = blockRef.value.getBoundingClientRect();\n    const newValue = [getPercentNumber(clientX - rect.x, rect.width), getPercentNumber(clientY - rect.y, rect.height)];\n    if (newValue[0] !== value[0] || newValue[1] !== value[1]) {\n      onChange == null ? void 0 : onChange(newValue);\n    }\n  };\n  const removeListener = () => {\n    active.value = false;\n    window.removeEventListener(\"mousemove\", onMouseMove);\n    window.removeEventListener(\"mouseup\", removeListener);\n    window.removeEventListener(\"contextmenu\", removeListener);\n  };\n  const onMouseDown = ev => {\n    active.value = true;\n    setCurrentPosition(ev);\n    window.addEventListener(\"mousemove\", onMouseMove);\n    window.addEventListener(\"mouseup\", removeListener);\n    window.addEventListener(\"contextmenu\", removeListener);\n  };\n  function onMouseMove(ev) {\n    ev.preventDefault();\n    if (ev.buttons > 0) {\n      setCurrentPosition(ev);\n    } else {\n      removeListener();\n    }\n  }\n  return {\n    active,\n    blockRef,\n    handlerRef,\n    onMouseDown\n  };\n};\nexport { useControlBlock };","map":{"version":3,"names":["ref","useControlBlock","value","onChange","active","blockRef","handlerRef","getPercentNumber","value2","max","setCurrentPosition","ev","clientX","clientY","rect","getBoundingClientRect","newValue","x","width","y","height","removeListener","window","removeEventListener","onMouseMove","onMouseDown","addEventListener","preventDefault","buttons"],"sources":["/Users/yinger/node_modules/@arco-design/web-vue/es/color-picker/hooks/use-control-block.js"],"sourcesContent":["import { ref } from \"vue\";\nconst useControlBlock = ({ value, onChange }) => {\n  const active = ref(false);\n  const blockRef = ref();\n  const handlerRef = ref();\n  const getPercentNumber = (value2, max) => {\n    if (value2 < 0)\n      return 0;\n    if (value2 > max)\n      return 1;\n    return value2 / max;\n  };\n  const setCurrentPosition = (ev) => {\n    if (!blockRef.value)\n      return;\n    const { clientX, clientY } = ev;\n    const rect = blockRef.value.getBoundingClientRect();\n    const newValue = [\n      getPercentNumber(clientX - rect.x, rect.width),\n      getPercentNumber(clientY - rect.y, rect.height)\n    ];\n    if (newValue[0] !== value[0] || newValue[1] !== value[1]) {\n      onChange == null ? void 0 : onChange(newValue);\n    }\n  };\n  const removeListener = () => {\n    active.value = false;\n    window.removeEventListener(\"mousemove\", onMouseMove);\n    window.removeEventListener(\"mouseup\", removeListener);\n    window.removeEventListener(\"contextmenu\", removeListener);\n  };\n  const onMouseDown = (ev) => {\n    active.value = true;\n    setCurrentPosition(ev);\n    window.addEventListener(\"mousemove\", onMouseMove);\n    window.addEventListener(\"mouseup\", removeListener);\n    window.addEventListener(\"contextmenu\", removeListener);\n  };\n  function onMouseMove(ev) {\n    ev.preventDefault();\n    if (ev.buttons > 0) {\n      setCurrentPosition(ev);\n    } else {\n      removeListener();\n    }\n  }\n  return {\n    active,\n    blockRef,\n    handlerRef,\n    onMouseDown\n  };\n};\nexport { useControlBlock };\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,KAAK;AACzB,MAAMC,eAAe,GAAGA,CAAC;EAAEC,KAAK;EAAEC;AAAS,CAAC,KAAK;EAC/C,MAAMC,MAAM,GAAGJ,GAAG,CAAC,KAAK,CAAC;EACzB,MAAMK,QAAQ,GAAGL,GAAG,CAAC,CAAC;EACtB,MAAMM,UAAU,GAAGN,GAAG,CAAC,CAAC;EACxB,MAAMO,gBAAgB,GAAGA,CAACC,MAAM,EAAEC,GAAG,KAAK;IACxC,IAAID,MAAM,GAAG,CAAC,EACZ,OAAO,CAAC;IACV,IAAIA,MAAM,GAAGC,GAAG,EACd,OAAO,CAAC;IACV,OAAOD,MAAM,GAAGC,GAAG;EACrB,CAAC;EACD,MAAMC,kBAAkB,GAAIC,EAAE,IAAK;IACjC,IAAI,CAACN,QAAQ,CAACH,KAAK,EACjB;IACF,MAAM;MAAEU,OAAO;MAAEC;IAAQ,CAAC,GAAGF,EAAE;IAC/B,MAAMG,IAAI,GAAGT,QAAQ,CAACH,KAAK,CAACa,qBAAqB,CAAC,CAAC;IACnD,MAAMC,QAAQ,GAAG,CACfT,gBAAgB,CAACK,OAAO,GAAGE,IAAI,CAACG,CAAC,EAAEH,IAAI,CAACI,KAAK,CAAC,EAC9CX,gBAAgB,CAACM,OAAO,GAAGC,IAAI,CAACK,CAAC,EAAEL,IAAI,CAACM,MAAM,CAAC,CAChD;IACD,IAAIJ,QAAQ,CAAC,CAAC,CAAC,KAAKd,KAAK,CAAC,CAAC,CAAC,IAAIc,QAAQ,CAAC,CAAC,CAAC,KAAKd,KAAK,CAAC,CAAC,CAAC,EAAE;MACxDC,QAAQ,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACa,QAAQ,CAAC;IAChD;EACF,CAAC;EACD,MAAMK,cAAc,GAAGA,CAAA,KAAM;IAC3BjB,MAAM,CAACF,KAAK,GAAG,KAAK;IACpBoB,MAAM,CAACC,mBAAmB,CAAC,WAAW,EAAEC,WAAW,CAAC;IACpDF,MAAM,CAACC,mBAAmB,CAAC,SAAS,EAAEF,cAAc,CAAC;IACrDC,MAAM,CAACC,mBAAmB,CAAC,aAAa,EAAEF,cAAc,CAAC;EAC3D,CAAC;EACD,MAAMI,WAAW,GAAId,EAAE,IAAK;IAC1BP,MAAM,CAACF,KAAK,GAAG,IAAI;IACnBQ,kBAAkB,CAACC,EAAE,CAAC;IACtBW,MAAM,CAACI,gBAAgB,CAAC,WAAW,EAAEF,WAAW,CAAC;IACjDF,MAAM,CAACI,gBAAgB,CAAC,SAAS,EAAEL,cAAc,CAAC;IAClDC,MAAM,CAACI,gBAAgB,CAAC,aAAa,EAAEL,cAAc,CAAC;EACxD,CAAC;EACD,SAASG,WAAWA,CAACb,EAAE,EAAE;IACvBA,EAAE,CAACgB,cAAc,CAAC,CAAC;IACnB,IAAIhB,EAAE,CAACiB,OAAO,GAAG,CAAC,EAAE;MAClBlB,kBAAkB,CAACC,EAAE,CAAC;IACxB,CAAC,MAAM;MACLU,cAAc,CAAC,CAAC;IAClB;EACF;EACA,OAAO;IACLjB,MAAM;IACNC,QAAQ;IACRC,UAAU;IACVmB;EACF,CAAC;AACH,CAAC;AACD,SAASxB,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}